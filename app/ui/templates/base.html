<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tag Sentinel - Web Analytics Auditing and Monitoring Platform">
    <title>{% block title %}Tag Sentinel{% endblock %}</title>

    <!-- Favicon and app icons -->
    <link rel="icon" type="image/svg+xml" href="/ui/static/images/favicon.svg">

    <!-- CSS -->
    <link rel="stylesheet" href="/ui/static/css/main.css">
    <link rel="stylesheet" href="/ui/static/css/accessibility.css">

    {% block extra_css %}{% endblock %}

    <!-- Skip link for accessibility -->
    <style>
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #1a73e8;
            color: white;
            padding: 8px;
            z-index: 1000;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
        }
        .skip-link:focus {
            top: 6px;
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Main navigation -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/ui/" aria-label="Tag Sentinel Home">
                    <span class="brand-text">Tag Sentinel</span>
                </a>
            </div>

            <ul class="nav-links" role="menubar">
                <li role="none">
                    <a href="/ui/"
                       role="menuitem"
                       class="nav-link {% if page == 'dashboard' %}active{% endif %}"
                       aria-current="{% if page == 'dashboard' %}page{% else %}false{% endif %}">
                        Dashboard
                    </a>
                </li>
                <li role="none">
                    <a href="/ui/runs"
                       role="menuitem"
                       class="nav-link {% if page == 'runs' %}active{% endif %}"
                       aria-current="{% if page == 'runs' %}page{% else %}false{% endif %}">
                        Audit Runs
                    </a>
                </li>
                <li role="none">
                    <a href="/ui/health"
                       role="menuitem"
                       class="nav-link {% if page == 'health' %}active{% endif %}"
                       aria-current="{% if page == 'health' %}page{% else %}false{% endif %}">
                        System Health
                    </a>
                </li>
            </ul>

            <!-- Mobile menu button -->
            <button class="mobile-menu-btn"
                    aria-expanded="false"
                    aria-controls="mobile-nav"
                    aria-label="Toggle navigation menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>

        <!-- Mobile navigation -->
        <div class="mobile-nav" id="mobile-nav" aria-hidden="true">
            <ul class="mobile-nav-links" role="menu">
                <li role="none">
                    <a href="/ui/"
                       role="menuitem"
                       class="mobile-nav-link {% if page == 'dashboard' %}active{% endif %}">
                        Dashboard
                    </a>
                </li>
                <li role="none">
                    <a href="/ui/runs"
                       role="menuitem"
                       class="mobile-nav-link {% if page == 'runs' %}active{% endif %}">
                        Audit Runs
                    </a>
                </li>
                <li role="none">
                    <a href="/ui/health"
                       role="menuitem"
                       class="mobile-nav-link {% if page == 'health' %}active{% endif %}">
                        System Health
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Page header -->
    <header class="page-header" role="banner">
        <div class="header-container">
            <h1 class="page-title">{% block page_title %}{{ title }}{% endblock %}</h1>
            {% block page_actions %}{% endblock %}
        </div>
    </header>

    <!-- Main content area -->
    <main id="main-content" class="main-content" role="main" tabindex="-1">
        <!-- Breadcrumbs -->
        {% block breadcrumbs %}{% endblock %}

        <!-- Page content -->
        <div class="content-container">
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-links">
                <a href="/docs" class="footer-link">API Documentation</a>
                <a href="/health" class="footer-link">System Status</a>
                <a href="https://github.com/your-org/tag-sentinel"
                   class="footer-link"
                   target="_blank"
                   rel="noopener noreferrer">
                    GitHub
                </a>
            </div>
            <div class="footer-info">
                <p>&copy; 2024 Tag Sentinel. Open source web analytics auditing platform.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/ui/static/js/main.js"></script>
    <script src="/ui/static/js/accessibility.js"></script>
    {% block extra_js %}{% endblock %}

    <!-- Live region for screen reader announcements -->
    <div id="sr-announcements"
         class="sr-only"
         aria-live="polite"
         aria-atomic="true"></div>
</body>
</html>